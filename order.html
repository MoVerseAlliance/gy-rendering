<!DOCTYPE HTML>
<html>
<head>
    <title>服务订购 - 光影科技工作室</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <a href="index.html" class="logo"><strong>光影科技</strong> <span>工作室</span></a>
            <nav>
                <a href="#menu">菜单</a>
            </nav>
        </header>

        <!-- Menu -->
        <nav id="menu">
            <ul class="links">
                <li><a href="index.html">首页</a></li>
                <li><a href="landing.html">作品集</a></li>
                <li><a href="generic.html">服务项目</a></li>
                <li><a href="order.html">服务订购</a></li>
                <li><a href="elements.html">联系我们</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div id="main" class="alt">

            <!-- Section: 需求表单 -->
            <section id="one">
                <div class="inner">
                    <header class="major">
                        <h1>服务订购与支付</h1>
                    </header>
                    <p>请详细填写您的项目需求，我们将根据您提供的信息在 <strong>4小时内</strong> 为您提供详细报价。您也可以先支付咨询预付款，我们会立即与您联系。</p>

                    <form id="projectRequestForm">
                        <div class="fields">
                            <div class="field half">
                                <label for="name">您的姓名 *</label>
                                <input type="text" name="name" id="name" required />
                            </div>
                            <div class="field half">
                                <label for="email">电子邮箱 *</label>
                                <input type="email" name="email" id="email" required />
                            </div>
                            <div class="field">
                                <label for="service">所需服务类型 *</label>
                                <select name="service" id="service" required>
                                    <option value="">-- 请选择 --</option>
                                    <option value="product">产品建模</option>
                                    <option value="character">角色动画</option>
                                    <option value="scene">场景设计</option>
                                    <option value="arch">建筑可视化</option>
                                    <option value="vfx">视觉特效</option>
                                    <option value="arvr">AR/VR内容</option>
                                    <option value="other">其他（请在下方说明）</option>
                                </select>
                            </div>
                            <div class="field">
                                <label for="budget">期望预算 (USD)</label>
                                <select name="budget" id="budget">
                                    <option value="">-- 请选择 --</option>
                                    <option value="100-500">100 - 500 USD</option>
                                    <option value="500-1000">500 - 1,000 USD</option>
                                    <option value="1000-5000">1,000 - 5,000 USD</option>
                                    <option value="5000+">5,000 USD 以上</option>
                                </select>
                            </div>
                            <div class="field">
                                <label for="message">项目详细描述 *</label>
                                <textarea name="message" id="message" rows="6" placeholder="请尽可能详细地描述您的需求，例如：参考图、风格要求、格式、尺寸、交付周期等..." required></textarea>
                            </div>
                        </div>
                        <ul class="actions">
                            <li><input type="submit" value="提交需求并等待报价" class="primary" /></li>
                            <li><input type="reset" value="清空内容" /></li>
                        </ul>
                    </form>
                    <p id="formSuccessMessage" style="display:none; color: green; font-weight: bold;">感谢您提交需求！我们已收到您的信息，将在4小时内通过邮件向您发送详细报价单。</p>
                </div>
            </section>

            <!-- Section: 支付区域 (无背景色，完全正常显示) -->
            <section id="paymentSection" style="padding: 3em 0;">
                <div class="inner">
                    <header class="major">
                        <h2>项目支付</h2>
                    </header>
                    <p><strong>标准服务预付款</strong>。支付后我们的客户经理会立即与您联系确认需求细节，多退少补。</p>

                    <div class="box">
                        <h4>支付详情</h4>
                        <p><strong>项目类型：</strong> <span id="quoteService">3D设计服务咨询</span></p>
                        <p><strong>支付金额：</strong> <span id="quoteAmount" style="font-size: 1.5em; color: #e44c65;">$99.00</span> USD</p>
                        <p><strong>说明：</strong> 此款项为项目启动预付款，最终金额以实际报价为准</p>
                    </div>

                    <!-- PayPal按钮容器 -->
                    <div id="paypal-button-container"></div>
                    <p style="font-size: 0.9em; color: #666; margin-top: 1em;"><i class="icon solid alt fa-lock"></i> 支付过程由PayPal安全加密。</p>
                </div>
            </section>

        </div>

        <!-- Footer -->
        <footer id="footer">
            <div class="inner">
                <ul class="copyright">
                    <li>&copy; 2024 光影科技工作室. 保留所有权利</li>
                </ul>
            </div>
        </footer>

    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- PayPal SDK (请将YOUR_CLIENT_ID_HERE替换成您的真实Client ID) -->
    <script src="https://www.paypal.com/sdk/js?client-id=AW4V7KJMrqQZW6_-6P3cHHn6m6tIhHHptTiCOz2sb9XOknmAdFKidkdvvANsuMN2WECeUTb3Vf5IIlE9&currency=USD"></script>

    <!-- 自定义脚本 -->
    <script>
        // 页面加载时直接显示支付按钮
        document.addEventListener('DOMContentLoaded', function() {
            // 设置默认金额
            window.invoiceAmount = '99.00';
            // 渲染PayPal按钮
            renderPayPalButton();
        });

        // 表单提交处理
        document.getElementById('projectRequestForm').addEventListener('submit', function(e) {
            e.preventDefault();
            document.getElementById('formSuccessMessage').style.display = 'block';
            alert('需求已提交！我们将尽快为您提供详细报价。您也可以先支付预付款立即启动项目。');
        });

        // 渲染PayPal按钮的函数
        function renderPayPalButton() {
            paypal.Buttons({
                style: {
                    shape: 'rect',
                    color: 'gold',
                    layout: 'vertical',
                    label: 'paypal'
                },
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: window.invoiceAmount,
                                currency_code: 'USD'
                            },
                            description: '光影科技工作室 - 3D设计服务预付款'
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        alert('支付成功！感谢您的信任。\n订单ID: ' + details.id + '\n我们的项目经理将立即与您联系。');
                    });
                },
                onError: function (err) {
                    console.error('PayPal支付错误:', err);
                    alert('支付过程中出现错误，请重试或直接联系我们。');
                }
            }).render('#paypal-button-container');
        }
    </script>

</body>
</html>
